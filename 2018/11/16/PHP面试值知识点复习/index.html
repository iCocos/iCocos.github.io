<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="http://pd1l3bbt7.bkt.clouddn.com/img/favicon.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="http://pd1l3bbt7.bkt.clouddn.com/img/favicon.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="http://pd1l3bbt7.bkt.clouddn.com/img/favicon.png?v=6.3.0">


  <link rel="mask-icon" href="http://pd1l3bbt7.bkt.clouddn.com/img/favicon.png?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="=====================1.基础===================== 1.1 PHP的引用传递值类型默认存放在栈中，但当值类型是在引用类型中声明的时候，则存放在其所在的引用类型的堆中。  引用类型存放在堆中。其在堆中的内存地址存放在栈中。 1.2 PHP定义字符串的几种方式单引号、双引号、heredoc(&amp;lt;&amp;lt;&amp;lt;EOT)和newdoc(&amp;lt;&amp;lt;&amp;lt">
<meta name="keywords" content="PHP,实战">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP面试值知识点复习">
<meta property="og:url" content="https://icocos.github.io/2018/11/16/PHP面试值知识点复习/index.html">
<meta property="og:site_name" content="iCocos">
<meta property="og:description" content="=====================1.基础===================== 1.1 PHP的引用传递值类型默认存放在栈中，但当值类型是在引用类型中声明的时候，则存放在其所在的引用类型的堆中。  引用类型存放在堆中。其在堆中的内存地址存放在栈中。 1.2 PHP定义字符串的几种方式单引号、双引号、heredoc(&amp;lt;&amp;lt;&amp;lt;EOT)和newdoc(&amp;lt;&amp;lt;&amp;lt">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-05-22T09:17:17.505Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP面试值知识点复习">
<meta name="twitter:description" content="=====================1.基础===================== 1.1 PHP的引用传递值类型默认存放在栈中，但当值类型是在引用类型中声明的时候，则存放在其所在的引用类型的堆中。  引用类型存放在堆中。其在堆中的内存地址存放在栈中。 1.2 PHP定义字符串的几种方式单引号、双引号、heredoc(&amp;lt;&amp;lt;&amp;lt;EOT)和newdoc(&amp;lt;&amp;lt;&amp;lt">



  <link rel="alternate" href="/atom.xml" title="iCocos" type="application/atom+xml" />




  <link rel="canonical" href="https://icocos.github.io/2018/11/16/PHP面试值知识点复习/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>PHP面试值知识点复习 | iCocos</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">iCocos</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">www.icocos.cn</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-首页">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-归档">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-关于">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-作品">
    <a href="/works/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />作品</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://icocos.github.io/2018/11/16/PHP面试值知识点复习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="曹理鹏@iCocos">
      <meta itemprop="description" content="纯码迷、爱学习、爱交友、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中！">
      <meta itemprop="image" content="http://pd1l3bbt7.bkt.clouddn.com/icocos_user_icon.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iCocos">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">PHP面试值知识点复习
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-16 18:15:54" itemprop="dateCreated datePublished" datetime="2018-11-16T18:15:54+08:00">2018-11-16</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/2018/11/16/PHP面试值知识点复习/#SOHUCS" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="2018/11/16/PHP面试值知识点复习/" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          
             <span id="/2018/11/16/PHP面试值知识点复习/" class="leancloud_visitors" data-flag-title="PHP面试值知识点复习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon"
            >
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">16k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">14 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>=====================1.基础=====================</p>
<h5 id="1-1-PHP的引用传递"><a href="#1-1-PHP的引用传递" class="headerlink" title="1.1 PHP的引用传递"></a>1.1 PHP的引用传递</h5><pre><code>值类型默认存放在栈中，但当值类型是在引用类型中声明的时候，则存放在其所在的引用类型的堆中。

引用类型存放在堆中。其在堆中的内存地址存放在栈中。
</code></pre><h5 id="1-2-PHP定义字符串的几种方式"><a href="#1-2-PHP定义字符串的几种方式" class="headerlink" title="1.2 PHP定义字符串的几种方式"></a>1.2 PHP定义字符串的几种方式</h5><p>单引号、双引号、heredoc(&lt;&lt;&lt;EOT)和newdoc(&lt;&lt;&lt;’EOT’)</p>
<a id="more"></a>
<p>区别：双引号可以解析变量，转义字符而单引号不可以；单引号和双引号都可以使用.进行连接；单引号比双引号的执行效率更好；heredoc和newdoc主要用于比较长的字符串；</p>
<blockquote>
<p>注意：双引号中的单引号不</p>
</blockquote>
<pre><code>$a   = &apos;newStr&apos;;
$str = &quot;abcdef{&amp;&amp;$a&amp;&amp;}g&quot;;
var_dump($str);

echo PHP_EOL;

$str = &lt;&lt;&lt;&apos;EOL&apos;
SELECTFROM `dvb_user` WHERE `userName` = &apos;panda&apos; AND `sex` = &apos;1&apos; AND  `money` &gt; 280 LEFT JOIN `dvb_hotel` ON
`dvb_user`.id = `dvb_hotel`.user_id;
EOL;
</code></pre><h5 id="1-3-PHP的数据类型"><a href="#1-3-PHP的数据类型" class="headerlink" title="1.3 PHP的数据类型"></a>1.3 PHP的数据类型</h5><p>PHP的数据类型有8种(整形、字符型、浮点型、数组、对象、null、资源、布尔型) 可以分为三类(标量 符合 特殊)<br>注意：浮点类型不能用于准确的相等判断中；布尔类型包括（0、’’、’0’，[],false,null,0.0）</p>
<pre><code>var_dump($str);

$a = 0.1;
$b = 0.4;

if((float)$a + (double)$b === (float)0.5){
    echo &apos;true&apos;;
}else{
    echo &apos;false&apos;;
}
</code></pre><h5 id="1-4-PHP中的超全局数组"><a href="#1-4-PHP中的超全局数组" class="headerlink" title="1.4 PHP中的超全局数组"></a>1.4 PHP中的超全局数组</h5><p>$_GLOBALS,$_GET,$_POST,$_REQUEST,$_SERVER,$_SESSION,$_COOKIE,$_FILES,$_ENV</p>
<blockquote>
<p>注意：$_GLOBALS包含其他所有的全局数组 主要记住 $_SERVER[‘SERVER_ADDR’] $_SERVER[‘REMOTE_ADDR’] $_SERVER[‘HTTP_USER_AGENT’]</p>
</blockquote>
<pre><code>var_dump($_SERVER);
</code></pre><h5 id="1-5-NULL的三种情况"><a href="#1-5-NULL的三种情况" class="headerlink" title="1.5 NULL的三种情况"></a>1.5 NULL的三种情况</h5><p>直接对变量赋值为NULL 、变量未定义、变量被销毁</p>
<pre><code>var_dump($a);
$a = &apos;a&apos;;
unset($a);
var_dump($a);
</code></pre><h5 id="1-6-比较常量-const和define-常量一经定义不能进行修改和删除"><a href="#1-6-比较常量-const和define-常量一经定义不能进行修改和删除" class="headerlink" title="1.6 比较常量 const和define (常量一经定义不能进行修改和删除)"></a>1.6 比较常量 const和define (常量一经定义不能进行修改和删除)</h5><p>PHP预定义常量 <strong>FILE</strong>、<strong>LINE</strong>、<strong>DIR</strong>、<strong>FUNCTION</strong>、<strong>CLASS</strong>、<strong>TRAIT</strong>、<strong>METHOD</strong>、<strong>NAMESPACE</strong></p>
<pre><code>class IndexClass{
    //定义常量，const可以定义在类内，而define不可以
    const A = &apos;a&apos;;
    const B = &apos;b&apos;;
}
define(&apos;AAA&apos;,5);
define(&apos;BBB&apos;,6);
//测试修改define常量
define(&apos;AAA&apos;,4);  //这种用法不会真正的修改到常量的值
var_dump(AAA);
var_dump(BBB);
$indexClass = new IndexClass();
var_dump($indexClass::A);
var_dump(__FILE__); //当前文件的路径和文件名
var_dump(__LINE__); //返回当前的行号
var_dump(__DIR__); //返回当前文件所在的目录路径
class TestClass{
//    //初始化
    public function __construct()
    {
//          var_dump(__CLASS__); //返回当前的类名
            var_dump(__FUNCTION__); //返回当前的方法名
    }

    public function test()
    {
        var_dump(__FUNCTION__);   //__METHOD__和__FUNCTION__位于类外，没有区别；位于类内，__METHOD__会多一个类名 string(15) &quot;TestClass::test&quot;
        var_dump(__METHOD__);
    }
}

$obj = new TestClass(); $obj-&gt;test();

trait TraitTest{
    //
    public function test()
    {
        echo 1;
    }
}

class Index{
    use TraitTest;

    public function __construct()
    {
        $this-&gt;test();
    }

    public function testTrait()
    {
//        var_dump(__TRAIT__);
    }
}

$a = new Index(); $a-&gt;testTrait();
var_dump(__NAMESPACE__); //返回当前文件的命名空间
</code></pre><p>=====================2.变量与作用域=====================</p>
<h5 id="2-1-变量的作用域和静态变量"><a href="#2-1-变量的作用域和静态变量" class="headerlink" title="2.1 变量的作用域和静态变量"></a>2.1 变量的作用域和静态变量</h5><p>变量的作用域：变量生效的范围，这个范围的跨度包括require和include引入的文件<br>函数外面的变量（全局变量）一般情况不可以直接在函数内部进行使用，如果要在函数内部使用外部的定义的变量可以使用global或者其他超全局数组关键字；</p>
<p>静态变量 static 静态变量只会存在于函数内部，函数外部的变量不受其影响，但当程序离开此程序作用域，其值不会随着函数的执行完毕而消失</p>
<h6 id="静态变量的特点："><a href="#静态变量的特点：" class="headerlink" title="静态变量的特点："></a>静态变量的特点：</h6><ul>
<li>①仅初始化一次；</li>
<li>②初始化的时候需要赋值；</li>
<li>③每次执行完函数该值保留 </li>
<li>④static修饰的变量是局部的，仅在函数内部有效 </li>
<li>⑤可以用来记录函数调用的次数</li>
</ul>
<h5 id="2-2-函数的参数"><a href="#2-2-函数的参数" class="headerlink" title="2.2 函数的参数"></a>2.2 函数的参数</h5><p>默认情况下，函数的参数传递是通过值传递的，如果想在函数的内部修改参数的值，需要进行引用传递，即在参数的前面加上&amp;</p>
<pre><code>$a = 1; //1
function test_function_params(&amp;$a){
    $a++;
    echo $a;
    echo PHP_EOL;
}
$a++; //2
echo test_function_params($a);  //3
echo $a; //3
</code></pre><h5 id="2-3-函数的返回值"><a href="#2-3-函数的返回值" class="headerlink" title="2.3 函数的返回值"></a>2.3 函数的返回值</h5><p> 使用return进行返回，函数中一旦执行到return则马上进行返回<br> 可以返回数组，对象等php基本数据类型<br> 原则上不允许返回多个值，可以通过数组来保存多个值<br> 引用返回：需要在函数声明和值返回的时候加上引用符号</p>
<pre><code>function &amp;my_func(){
    static $a = 3;
    return $a;
}
echo my_func(); //10
$a = &amp;my_func();//将外部的$a和内部的$a的变量指向相同的内存空间
$a = 100; //修改内存空间的值
echo my_func(); //100
</code></pre><h5 id="2-4-外部引用"><a href="#2-4-外部引用" class="headerlink" title="2.4 外部引用"></a>2.4 外部引用</h5><p> 外部引用文件需要指明引用文件的具体路径，如果没有指定则会去系统的include_path文件下查找,如果include_path也没有，则会从当前目录进行查找</p>
<p>如果在以上三个地方都没有找到，那么加载文件就会报错，include会产生警告，require会产生致命的错误 include_once和require_once</p>
<pre><code>include &apos;index1.php&apos;;
require &apos;index1.php&apos;;
</code></pre><h5 id="2-5-常用的PHP内置函数"><a href="#2-5-常用的PHP内置函数" class="headerlink" title="2.5 常用的PHP内置函数"></a>2.5 常用的PHP内置函数</h5><p>时间日期函数 Ip处理函数 打印处理函数 序列化函数 字符串处理函数 数组处理函数 <a href="https://php.net/" target="_blank" rel="noopener">https://php.net/</a></p>
<pre><code>var_dump(date(&apos;Y-m-d H:i:s&apos;,1494221221));  //将时间戳格式化成日期时间类型
var_dump(time());  //time() 打印当前的时间戳
var_dump(strtotime(&apos;2018-12-7 12:30&apos;));  //将英文的日期时间转化为时间戳
var_dump(mktime(12,45,11,3,23,2019)); //输出一个指定日期时间的时间戳
var_dump(microtime()); //返回当前的Unix时间戳和微秒数
date_default_timezone_set(&apos;Asia/Shanghai&apos;); //设定用于一个脚本中所有日期时间函数的默认时区
</code></pre><p>ip相关</p>
<pre><code>var_dump(ip2long(&apos;192.168.1.1&apos;));  //将 IPV4 的字符串互联网协议转换成长整型数字
var_dump(long2ip(3232235778)); //将 长整型数字 转化成 IPV4 的字符串互联网协议转
打印相关 print() echo() printf() sprintf() printf_r()只能针对数组和对象  var_dump() var_export()
</code></pre><p>字符串处理函数</p>
<pre><code>implode(); //将多个数组,用指定的字符连接起来 join()===implode()
explode(); //将字符串分割成数组
$a = [&apos;1&apos;,&apos;2&apos;,&apos;3&apos;];  var_dump(implode(&apos;-&apos;,$a));
$str = &apos;192.168.1.1&apos;;  var_dump(explode(&apos;.&apos;,$str));
$str = &apos;192.168.1.1&apos;; var_dump(strrev($str)); //翻转字符串
$str = &apos; 123 455\t &apos;; var_dump($str); var_dump(trim($str)); //过滤字符串首部和尾部的空白字符（或者其他字符）
ltrim() rtrim() left right
$str = &apos;192.168.1.1&apos;; var_dump(strstr($str,&apos;.&apos;)); //strstr();  //查找字符串的首次出现
echo number_format(125,&apos;3&apos;);  //以千位分隔符方式格式化一个数字
</code></pre><p>=====================3.正则表达式=====================</p>
<h5 id="3-1-正则表达式"><a href="#3-1-正则表达式" class="headerlink" title="3.1 正则表达式"></a>3.1 正则表达式</h5><p>正则表达式的作用：分割、查找、匹配、替换</p>
<ul>
<li>常用的分隔符：正斜线（/） hash符号（#）以及取反符号（~）</li>
<li>通用原子： \d [0-9] \D ![0-9] \w [数字、字母、下划线] \W ![数字、字母、下划线] \s 空白符 \S !空白符</li>
<li>元字符：.![换行符]匹配前面的内容0 1 多次  ?  ^ $ + {n} {n,} {n,m} [] () [^] | [-]</li>
</ul>
<blockquote>
<p>模式修正符 i m e s U x A D u</p>
</blockquote>
<p>涉及到的函数 preg_match() preg_match_all() preg_replace() preg_split()</p>
<h5 id="3-2-正则表达式后向引用"><a href="#3-2-正则表达式后向引用" class="headerlink" title="3.2 正则表达式后向引用"></a>3.2 正则表达式后向引用</h5><p>需要匹配的用括号括起来</p>
<pre><code>$str = &apos;&lt;b&gt;abc&lt;/b&gt;&apos;;  //将其中的b替换成其他
$pattern  = &apos;/&lt;b&gt;(.*)&lt;\/b&gt;/&apos;;
//$result  = preg_match($pattern,$str); //匹配是都在&lt;b&gt;&lt;/b&gt;中
$result   = preg_replace($pattern,&apos;\\1&apos;,$str); //去掉b标签
var_dump($result);
</code></pre><h5 id="3-3-正则表达式的贪婪模式"><a href="#3-3-正则表达式的贪婪模式" class="headerlink" title="3.3 正则表达式的贪婪模式"></a>3.3 正则表达式的贪婪模式</h5><p>如果含有多个标签，正则表达式的贪婪模式会匹配第一个和最后一个<br>解决方法在 .* 后面加个? 取消贪婪模式</p>
<pre><code>$str = &apos;&lt;b&gt;abc&lt;/b&gt;&lt;b&gt;bcd&lt;/b&gt;&apos;;  //将其中的b替换成其他
$pattern  = &apos;/&lt;b&gt;(.*?)&lt;\/b&gt;/&apos;;
$result   = preg_replace($pattern,&apos;\\1&apos;,$str); //去掉b标签
var_dump($result);
</code></pre><h5 id="3-4-PHP正则表达式匹配中文"><a href="#3-4-PHP正则表达式匹配中文" class="headerlink" title="3.4 PHP正则表达式匹配中文"></a>3.4 PHP正则表达式匹配中文</h5><p> 中文字符在utf-8模式下的 0x4e00-0X9fa5<br> gbk需要加chr() 函数</p>
<blockquote>
<p>注意：中文字符匹配需要加+</p>
</blockquote>
<pre><code>$str = &apos;我爱我家&apos;;
$pattern = &apos;/[\x4e00-\x9fa5]+/&apos;;
preg_match($pattern,$str,$match);
var_dump($match);
</code></pre><h5 id="3-5-练习-写一个139开头的手机号"><a href="#3-5-练习-写一个139开头的手机号" class="headerlink" title="3.5 练习 写一个139开头的手机号"></a>3.5 练习 写一个139开头的手机号</h5><pre><code>$str     = &apos;13968547896&apos;;
$pattern = &apos;/139[0-9]{8}/&apos;;
preg_match($pattern,$str,$match);
var_dump($match);
$str = &apos;https://www.baidu.com&apos;;
$pattern = &apos;/^(http|https):\/\/(.*)+/&apos;;
preg_match($pattern,$str,$match);
var_dump($match);
请写出一个正则表达式，取出页面中的所有的img标签的src值
$str     = &apos;&lt;img class=&quot;index-top&quot; src=&quot;http://www.baidu.com/1&quot; id=&quot;index&quot; /&gt;&lt;p&gt;&lt;video src=&quot;aaa&quot;&gt;&lt;/video&gt;&lt;/p&gt;&lt;img class=&quot;index-top-2&quot; src=&quot;http://www.baidu.com/2&quot; width=&quot;100%&quot; /&gt;&apos;;
$pattern = &apos;/&lt;img.*?src=&quot;(.*?)&quot;.*? \/?&gt;/i&apos;;
$result  = preg_replace($pattern,&apos;\\1&apos;,$str);
var_dump($result);
</code></pre><p>=====================4. PHP常用的文件系统 =====================</p>
<p>真题：向一个已知的文件中的头部插入 Hello World</p>
<pre><code>1.打开文件
$file    = &apos;./test.txt&apos;;
$content = &apos;&apos;;
//2.以只读的方式，读取文件中的内容
if (file_exists($file)){
    $handle  = fopen($file,&apos;r&apos;);
    $content = fread($handle,filesize($file));
    //3.关闭文件
    fclose($handle);
}
//4.以只写的方式打开文件
$handle  = fopen($file,&apos;w&apos;);
//5.拼接新的字符串进行写入
$content = &quot;Hello World \t&quot; . $content;
fwrite($handle,$content);
//6.关闭文件
fclose($handle);
</code></pre><h5 id="4-1-PHP常用的文件函数复习"><a href="#4-1-PHP常用的文件函数复习" class="headerlink" title="4.1 PHP常用的文件函数复习"></a>4.1 PHP常用的文件函数复习</h5><pre><code>$file = &apos;./test.txt&apos;;
var_dump(basename($file));  //basename()返回文件名
var_dump(copy($file,&apos;./test1.txt&apos;));  //copy() 拷贝文件，如果目标文件已经存在，则会进行覆盖 overwrite
var_dump(unlink(&apos;./test1.txt&apos;));  //unlink() 删除文件，如果文件不存在，返回fasle，并且产生一个警告，所以在删除前需要先判断文件是否真的存在
if (file_exists(&apos;./test1.txt&apos;)){
    unlink(&apos;./test1.txt&apos;);
}
var_dump(dirname(__FILE__));  //dirname()返回当前文件的文件目录，只会返回目录。如果文件使用的是相对路径，则只会返回相对路径的地址
</code></pre><ul>
<li>fopen() //没什么好说的，在读取和写入文件之前首先要打开文件，打开的几种方式 r只读 r+读写，指针在文件的头部，如果直接使用则会将后面的字符替换掉 w只写w+读写指针在文件的头部 a只写，相当于在文件的尾部进行追加</li>
</ul>
<p>a+读写文件尾部进行追加 append的简写 x创建并以写入方式打开，指针在文件的头部 x+类似x=，读写方式打开 b打开一个二进制文件</p>
<blockquote>
<p>注意：当写入一个文本文件并想插入一个新行时，需要使用符合操作系统的行结束符号。基于 Unix 的系统使用 \n 作为行结束字符，基于 Windows 的系统使用 \r\n 作为行结束字符，基于 Macintosh 的系统使用 \r 作为行结束字符。</p>
</blockquote>
<p>fread() //没什么还说的，读取文件的内容。需要两个参数，第一个为打开的文件资源，第二个为要读取的内容的大小</p>
<pre><code>var_dump(filesize($file));  //文件的大小
fwrite(); //三个参数 第一个已经打开的文件资源 第二个为要插入的文件的内容 第三个要插入的文件的大小 和fputs()用法一致
fclose();  //没什么好说的，打开文件操作完之后要关闭文件,需要传递已经打开的文件的资源
fclose(fopen($file,&apos;r&apos;));
var_dump(fileatime($file)); //返回上次访问                                                                                                                                                                                                                                                                                                                                                         
</code></pre><p>文件的时间戳</p>
<pre><code>filectime(); //上次修改的时间戳
var_dump(flock($file));  //为文件加锁，比如对临界资源的等待
fgetc()  //从文件中读取字符
fgets() //从文件中读取一行
unlink($file); //删除文件
</code></pre><h5 id="4-2-对目录的操作"><a href="#4-2-对目录的操作" class="headerlink" title="4.2 对目录的操作"></a>4.2 对目录的操作</h5><p>通过PHP函数的方式对目录进行遍历<br>涉及到的函数 opendir() mkdir() rmdir() readdir()只会删除空的文件夹</p>
<p>使用递归的方法</p>
<pre><code>$dir = &apos;./test&apos;;
</code></pre><p>递归要使用函数</p>
<pre><code>function loopDir($dir){
    //1.判断传递进去的是不是文件夹
    if (!is_dir($dir)){
        return false;
    }
    //2.打开文件夹
    $handle = opendir($dir);
    //3.循环读取文件夹中的每一个文件
    while(false !== ($file = readdir($handle))){
        //4.过滤当前目录和上级目录
        if ($file != &apos;.&apos; &amp;&amp; $file != &apos;..&apos;){
            //5.判断当前文件是不是DIR类型
            if (filetype($dir . &apos;/&apos; .$file) == &apos;dir&apos;){
                loopDir($dir . &apos;/&apos; . $file);
            }else{
                //6.打印
                echo $file . PHP_EOL;
            }
        }
    }
}

loopDir($dir);
</code></pre><h5 id="4-3-注意事项"><a href="#4-3-注意事项" class="headerlink" title="4.3 注意事项"></a>4.3 注意事项</h5><ol>
<li>在删除文件的时候，注意要过滤..文件夹，有可能无限向上删除</li>
<li>在操作文件的时候，必须先要打开文件</li>
</ol>
<p>=====================5. PHP 会话控制技术=====================</p>
<h5 id="5-1-为什么要使用会话技术"><a href="#5-1-为什么要使用会话技术" class="headerlink" title="5.1 为什么要使用会话技术"></a>5.1 为什么要使用会话技术</h5><p>由于http协议是无状态的，同一个用户连续两次请求不同的页面会认为不是同一个用户进行的访问。这就有问题了</p>
<blockquote>
<p>比如用户已经登录了，然后再跳转到订单页面发现自己还是未登录的状态，因此需要使用会话技术来记录用户的状态，以便知道用户是否进行了页面的跳转</p>
</blockquote>
<h5 id="5-2-cookie"><a href="#5-2-cookie" class="headerlink" title="5.2 cookie"></a>5.2 cookie</h5><p>涉及到 cookie的函数</p>
<pre><code>setcookie($name,$value,$expire,$path,$domain,$secure) //键 值 过期时间 路径 域名 安全
$_COOKIE() 读取cookie
</code></pre><ul>
<li>优点：将用户的信息储存在用户的客户端不会占用服务端的资源</li>
<li>缺点：不安全，用户可以禁用cookie</li>
</ul>
<h5 id="5-3-session"><a href="#5-3-session" class="headerlink" title="5.3 session"></a>5.3 session</h5><p>session信息存储在服务端，客户端存的是sessionId session是基于cookie</p>
<pre><code>session相关的函数
session_start() //开启session
$_SESSION() 获取session的值
session_destroy();


session.auto_start =; //自动开启session
session.cookie_domain =; //存取的sessionId的cookie的有效域名
session.cookie_lifetime =; //cookie的过期时间i
session.cookie_path =; //cookie的路径
session.session_save_path =; //

session的垃圾回收机制
session.gc.probability = 1;
session.gc.divisor = 100;
session.gc.maxlifetime = 1440;  //当前的时间-最后的修改时间 &gt; 1440  每清除一百次会有一次清除成功的机会


session.save_handle = &apos;redis&apos;;
</code></pre><h5 id="5-4-session存储，如果有多台服务器，可以将session存储到数据库-memcache-redis中"><a href="#5-4-session存储，如果有多台服务器，可以将session存储到数据库-memcache-redis中" class="headerlink" title="5.4 session存储，如果有多台服务器，可以将session存储到数据库 memcache redis中"></a>5.4 session存储，如果有多台服务器，可以将session存储到数据库 memcache redis中</h5><pre><code>session_set_save_handler();  //将session储存到redis等
</code></pre><p>=====================6. PHP面向对象=====================</p>
<h5 id="6-1-PHP类的权限控制符"><a href="#6-1-PHP类的权限控制符" class="headerlink" title="6.1 PHP类的权限控制符"></a>6.1 PHP类的权限控制符</h5><pre><code>public protected private
</code></pre><h5 id="6-2-继承"><a href="#6-2-继承" class="headerlink" title="6.2 继承"></a>6.2 继承</h5><h5 id="6-3-多态"><a href="#6-3-多态" class="headerlink" title="6.3 多态"></a>6.3 多态</h5><p>抽象类 有抽象方法一定是抽象类</p>
<h5 id="6-4-常用的设计模式"><a href="#6-4-常用的设计模式" class="headerlink" title="6.4 常用的设计模式"></a>6.4 常用的设计模式</h5><ul>
<li>工厂模式</li>
<li>单例模式</li>
<li>注册树模式</li>
<li>适配器模式</li>
<li>观察者模式</li>
<li>策略模式</li>
</ul>
<p>=====================7.Tcp/IP协议=====================</p>
<h5 id="7-1-HTTP-协议状态码"><a href="#7-1-HTTP-协议状态码" class="headerlink" title="7.1 HTTP 协议状态码"></a>7.1 HTTP 协议状态码</h5><pre><code>1XX
2XX 成功，响应成功 200 204 206
3XX 重定向 301 302
4XX 客户端请求错误 400请求错误 401 认证信息 403 拒绝 404 not found
5XX 服务器错误 503 服务器无法处理
</code></pre><h5 id="7-2-OSI-七层模型"><a href="#7-2-OSI-七层模型" class="headerlink" title="7.2 OSI 七层模型"></a>7.2 OSI 七层模型</h5><p>物理层 数据链路层 网络层 传输层 会话层 表示层 应用层</p>
<pre><code>1.物理层  //建立 维护 断开物理连接
2.数据链路层  //建立逻辑连接 进行硬件物理寻址 差错校验等
3.网络层 //进行逻辑地址寻址，实现不同网络之间的选择
4.传输层 //定义传输数据协议的端口号 以及流控和差错校验 TCP UDP
5.会话层 //建立 管理 终止会话
6.表示层 //数据的表示 安全 压缩
7.应用层 //网络协议与用户的最终接口 HTTP FTP SMTP DNS HTTPS
</code></pre><h5 id="7-3-HTTP协议工作原理"><a href="#7-3-HTTP协议工作原理" class="headerlink" title="7.3 HTTP协议工作原理"></a>7.3 HTTP协议工作原理</h5><p>1.客户端发送请求给服务端，创建一个tcp连接，指定端口号 默认为80</p>
<p>2.连接到服务器后，服务器会监听浏览请求，分析请求类型，返回数据和内容</p>
<pre><code>Content-Type
Accept
Origin
Cookie
Cache-Control
user-Agent
Referrer
Access-control-Allow-origin //跨域使用
</code></pre><h5 id="7-4-HTTP的请求方法"><a href="#7-4-HTTP的请求方法" class="headerlink" title="7.4 HTTP的请求方法"></a>7.4 HTTP的请求方法</h5><p>get(查看 幂等) post(非幂等 创建) put(幂等 修改) delete(幂等) (head options trace 查看服务器性能)</p>
<blockquote>
<p>幂等 非幂等</p>
</blockquote>
<p>get和post有什么区别</p>
<pre><code>1.get后退操作不会造成影响，post后退会重新提交
2.post不能被缓存
3.get url参数有限制
4.get不安全 post比较安全
</code></pre><h5 id="7-5-常见的网络协议和端口"><a href="#7-5-常见的网络协议和端口" class="headerlink" title="7.5 常见的网络协议和端口"></a>7.5 常见的网络协议和端口</h5><pre><code>FTP 文件传输协议 21
TELNET 远程登录 23
SMTP 邮件发送协议 25
POP3 邮件接收协议 110
HTTP 超文本传输协议 80
DNS  域名解析 53
</code></pre><p>=====================8.PHP开发环境 （nginx + php-fpm）=====================</p>
<h5 id="8-1-cgi协议-为了实现语言解析器和webserver之间的通信"><a href="#8-1-cgi协议-为了实现语言解析器和webserver之间的通信" class="headerlink" title="8.1 cgi协议  为了实现语言解析器和webserver之间的通信"></a>8.1 cgi协议  为了实现语言解析器和webserver之间的通信</h5><h5 id="8-2-fastcgi是cgi的改良"><a href="#8-2-fastcgi是cgi的改良" class="headerlink" title="8.2 fastcgi是cgi的改良"></a>8.2 fastcgi是cgi的改良</h5><p>cgi的效率很低，webserver每收到一个请求就会fork一个cgi进程，请求处理完再kill掉这个进程，这样很浪费<br>fastcgi 每次处理请求之后不会kill掉这个进程，保留这个进程，一个进程可以处理多个请求，不需要每次都fork</p>
<h5 id="8-3-php-fpm-php：fastcgi-process-manager-fastcgi的进程管理器"><a href="#8-3-php-fpm-php：fastcgi-process-manager-fastcgi的进程管理器" class="headerlink" title="8.3 php-fpm php：fastcgi process manager fastcgi的进程管理器"></a>8.3 php-fpm php：fastcgi process manager fastcgi的进程管理器</h5><p>master进程 work进程（多个）一个进程嵌套PHP解析器 端口9000 通过nginx的反向代理，代理9000端口</p>
<h5 id="8-4-PHP常见的配置项"><a href="#8-4-PHP常见的配置项" class="headerlink" title="8.4 PHP常见的配置项"></a>8.4 PHP常见的配置项</h5><pre><code>register_globals 注册全局变量,不建议打开
allow_url_fopen 打开远程文件
allow_url_include 是否远程包含文件
date_timezone 时间
display_errors
error_reporting 错误级别
safe_mode 安全模式
upload_max_filesize 允许上传的文件大小
max_file_uploads 允许同时上传的数量
post_max_size 允许post上传的大小
</code></pre><p>真题：请简述cgi fastcgi 和 php-fpm的区别</p>
<blockquote>
<p>cgi是一种协议，是为了实现webServer和语言解析器之间通信的协议。每当浏览器用请求出现时，webServer就会fork一个cgi进程，在这个请求处理完之后就会kill掉这个进程<br>fastcgi是cgi协议的改良版。当webServer收到请求并且处理完之后，不会kill掉这个进程而是用来处理其他进程</p>
</blockquote>
<p>php-fpm是fastcgi的进程管理器。包括master进程和work进程。通常master进程负责和网络进行通信，而且work进程负责语言解析，每一个work进程包含一语言解析器</p>
<p>=====================9.PHP 使用js jq vue.js等=====================</p>
<h5 id="9-1-ajax技术运用了什么原理"><a href="#9-1-ajax技术运用了什么原理" class="headerlink" title="9.1 ajax技术运用了什么原理"></a>9.1 ajax技术运用了什么原理</h5><pre><code>async -javascript - and - xml
</code></pre><p>xMLHttpRequest()是实现ajax的基础</p>
<p>=====================10.PHP linux基础知识点=====================</p>
<h5 id="10-1-系统安全性"><a href="#10-1-系统安全性" class="headerlink" title="10.1 系统安全性"></a>10.1 系统安全性</h5><pre><code>//sudo
//su
//chmod
//setfacl
</code></pre><h5 id="10-2-进程管理"><a href="#10-2-进程管理" class="headerlink" title="10.2 进程管理"></a>10.2 进程管理</h5><pre><code>//w
//top
//ps
//kill
//pkill
//pstree
//killall
</code></pre><h5 id="10-3-用户管理"><a href="#10-3-用户管理" class="headerlink" title="10.3 用户管理"></a>10.3 用户管理</h5><h5 id="10-4-文件系统"><a href="#10-4-文件系统" class="headerlink" title="10.4 文件系统"></a>10.4 文件系统</h5><h5 id="10-5-网络"><a href="#10-5-网络" class="headerlink" title="10.5 网络"></a>10.5 网络</h5><h5 id="10-6-文件查看"><a href="#10-6-文件查看" class="headerlink" title="10.6 文件查看"></a>10.6 文件查看</h5><pre><code>tail less head more
</code></pre><h5 id="10-7-目录操作"><a href="#10-7-目录操作" class="headerlink" title="10.7 目录操作"></a>10.7 目录操作</h5><pre><code>crontab**分 时 日 月 周
</code></pre><p>=====================11.Mysql相关操作点=====================</p>
<h5 id="11-1-mysql数据类型"><a href="#11-1-mysql数据类型" class="headerlink" title="11.1 mysql数据类型"></a>11.1 mysql数据类型</h5><pre><code>tinyint smallint bigint
</code></pre><ul>
<li><p>整数类型 int(11) 这个11只是显示的宽度，并不会影响取值范围，最小宽度 整形括号里面的数据对于大多数应用是没有意义的</p>
</li>
<li><p>实数类型 float double decimal decimal是比bigint还大的整数，但是会被当做字符串来处理<br>varchar(可变长度，超出长度会被截断） char(固定长度，会根据需要补充空格，适合比较短的字符串，或者长度都差不多的，比如密码 唯一标识等，超出长度会被截断) text blob</p>
</li>
</ul>
<p>对于经常变更的数据，char比varchar更好，插入不容易产生碎片，对于比较短的字符，char比varchar更有效率</p>
<blockquote>
<p>进行不使用text和blob，会先查询临时表，造成不必要的开销</p>
</blockquote>
<ul>
<li>枚举类型</li>
</ul>
<p>日期和时间类型 尽量使用timestamp 比 datetime 的 空间效率要高 ，如果要储存微秒，需要使用bigint</p>
<h5 id="11-2-列属性"><a href="#11-2-列属性" class="headerlink" title="11.2 列属性"></a>11.2 列属性</h5><pre><code>auto_increment 自增
default 默认值
not null 非空
zerofill 0填充
</code></pre><h5 id="11-3-mysql的基本操作"><a href="#11-3-mysql的基本操作" class="headerlink" title="11.3 mysql的基本操作"></a>11.3 mysql的基本操作</h5><pre><code>mysql -u -h -p _P  //u username h host p password P port mysql连接
</code></pre><blockquote>
<p>\G //垂直显示 \c 取消mysql命令 \q 退出mysql \s 服务器状态 \h 帮助信息 \d 改变符号</p>
</blockquote>
<h5 id="11-4-mysql数据表引擎"><a href="#11-4-mysql数据表引擎" class="headerlink" title="11.4 mysql数据表引擎"></a>11.4 mysql数据表引擎</h5><p> InnoDb 默认事务型引擎，数据存在共享表空间可以通过配置分开 对主键查询的性能要高于其他引擎 从磁盘读取数据时自动在内存构建hash索引 插入数据自动构建缓冲区 支持行级锁 支持外键</p>
<p> MyISAM 5.1版本前默认的存储引擎 拥有全文检索 压缩和空间函数 不支持事务和行级锁 不支持热备份和安全</p>
<h5 id="11-5-mysql的锁机制"><a href="#11-5-mysql的锁机制" class="headerlink" title="11.5 mysql的锁机制"></a>11.5 mysql的锁机制</h5><p>当多个查询同一时刻进行数据修改的时候，就会产生并发控制的问题，这个时候mysql会进行锁表。包括共享锁（读锁）和排它锁（互斥锁，写锁）<br>写锁是临界资源，互斥的。同一个时候只能有一个进行写入<br>事务处理 InnoDB</p>
<h5 id="11-6-mysql触发器"><a href="#11-6-mysql触发器" class="headerlink" title="11.6 mysql触发器"></a>11.6 mysql触发器</h5><p>可以通过数据表中的中间表（外键）进行级联修改，不建议使用</p>
<h5 id="11-7-mysql索引基础和类型"><a href="#11-7-mysql索引基础和类型" class="headerlink" title="11.7 mysql索引基础和类型"></a>11.7 mysql索引基础和类型</h5><p> mysql先去索引中找到对应的值，然后根据匹配的索引找到对应的数据行<br>大大减少服务器需要扫描的数据量，帮助服务器避免排序和临时表 将随机IO变成顺序IO 大大提升查询速度 （影响：减低写的速度 占用磁更多的磁盘空间）</p>
<p>对于数据量比较小的表，不要使用索引，性能会更高。对于中大型表需要使用索引。特大型的表使用索引的代价也会变大，可以使用分区技术解决</p>
<blockquote>
<p>索引的类型 普通索引 唯一索引（唯一约束） 主键索引 一个表只能有一个主键索引，可以有多个唯一索引；主键索引一定是唯一索引，但是唯一索引不一定是主键索引 主键可以和外键参照建立约束，防止数据的不统一</p>
</blockquote>
<p>联合索引 将多个列组合在一起构成索引，涉及到多个列，为了减低索引的范围    外键索引  全文索引（只能对英文进行全文索引，没啥意思）</p>
<h5 id="11-8-mysql索引创建的规则-！！！"><a href="#11-8-mysql索引创建的规则-！！！" class="headerlink" title="11.8 mysql索引创建的规则 ！！！"></a>11.8 mysql索引创建的规则 ！！！</h5><ol>
<li>最适合做索引的列是出现在where字句里面的列，而不是select关键字后面的列</li>
<li>索引列的基数越大，索引的效果越好</li>
<li>对于字符串的索引，应该指定一个前缀长度，可以节省大量的索引空间</li>
<li>根据情况创建符合索引，符合索引可以大大提高查询的效率</li>
<li>避免创建过多的索引，索引会额外的占用磁盘空间，降低写操作的效率</li>
<li>主键尽可能选择较短的数据类型，可以有效减少索引占用磁盘空间，提高查询效率</li>
</ol>
<h6 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h6><ol>
<li>符合索引遵循前缀原则</li>
<li>like查询，%不能在前，可以使用全文检索解决问题  where name like “wang%”</li>
<li>column is null 可以使用索引</li>
<li>如果mysql估计使用索引比全表扫描更慢，会放弃使用索引</li>
<li>如果or前的条件有索引 后面没有，那么索引不会被用到</li>
<li>列类型是字符串类型，查询的时候一定要给值加引号，不然用不到索引</li>
</ol>
<h5 id="11-9-mysql语句的编写"><a href="#11-9-mysql语句的编写" class="headerlink" title="11.9 mysql语句的编写"></a>11.9 mysql语句的编写</h5><pre><code>//关联更新
$sql = &lt;&lt;&lt;EOL
UPDATE A,B SET A.c1 = B.c1,A.c2 = B.c2 WHERE A.id = B.id AND B.age &gt; 50;
UPDATE A AS t1 INNER JOIN B AS t2 ON ti.id = t2.id SET t1.c1 = t2.c1,t1.c2 = t2.c2 WHERE t2.age &gt; 50;
EOL;
//关联查询
//六种关联查询 cross join（笛卡尔积，没有意义）、inner join、left（right） join、union（union all）、full join
//内连接 等值连接 不等值连接 自连接 inner join = join inner可以省略不写
$sqlInner = &lt;&lt;&lt;EOL
SELECTFROM A,B WHERE A.id = B.id AND B.id &gt; 50;
SELECTFROM A t1 INNER JOIN B t2 ON t1.id = t2.id WHERE t2.age &gt; 50;
SELECTFROM A t1 JOIN A t2 ON t1.id = t2.pid WHERE t1.age &gt; 50;
EOL;
//外连接 left join 以左表为主 和right join 以右表为主 如果匹配不到用null填充
//联合查询union 把多条结果集集中在一起，以union前的结果为准，需要注意的是联合查询的列数要相等，相同的记录行会合并 union all
$sqlUnion = &lt;&lt;&lt;EOL
SELECTFROM A UNION SELECTFROM B....
EOL;
//全连接 mysql不支持全连接，可以使用left join 和 union 和 right join 联合使用
$sqlFull = &lt;&lt;&lt;EOL
SELECTFROM A LEFT JOIN B ON A.id = B.id union SELECTFROM A RIGHT join  B ON A.id = B.id;
EOL;
//嵌套查询 子查询
$sqlInclude = &lt;&lt;&lt;EOL
SELECTFROM A WHERE (SELECT id FROM B WHERE B.age &gt; 50);
EOL;

//example
$sqlExample = &lt;&lt;&lt;EOF
SELECT t1.teamName,m.matchResult,t2.teamName,m.matchTime

FROM `match` as m LEFT JOIN `team` as t1 ON t1.teamId = m.hostTeamId,left join `team` as t2 ON t2.teamId = m.guestTeamId

WHERE m.matchTime between &quot;2016-6-1&quot; AND &quot;2016-9-1&quot;;
EOF;
</code></pre>
      
    </div>

    

    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="http://pd1l3bbt7.bkt.clouddn.com/img/wechatimg.jpg" alt="曹理鹏@iCocos 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="http://pd1l3bbt7.bkt.clouddn.com/img/alipayimg.jpg" alt="曹理鹏@iCocos 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>曹理鹏@iCocos</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://icocos.github.io/2018/11/16/PHP面试值知识点复习/" title="PHP面试值知识点复习">https://icocos.github.io/2018/11/16/PHP面试值知识点复习/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/PHP/" rel="tag"># PHP</a>
          
            <a href="/tags/实战/" rel="tag"># 实战</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/30/cocos2dx-lua-热更新原理与实战/" rel="next" title="cocos2dx lua 热更新原理与实战">
                <i class="fa fa-chevron-left"></i> cocos2dx lua 热更新原理与实战
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/16/Nginx配置文件-nginx-conf-详解/" rel="prev" title="Nginx配置文件(nginx.conf)详解">
                Nginx配置文件(nginx.conf)详解 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="SOHUCS"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://pd1l3bbt7.bkt.clouddn.com/icocos_user_icon.JPG"
                alt="曹理鹏@iCocos" />
            
              <p class="site-author-name" itemprop="name">曹理鹏@iCocos</p>
              <p class="site-description motion-element" itemprop="description">纯码迷、爱学习、爱交友、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中！</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">179</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">111</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/al1020119" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:al1020119@163.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://stackoverflow.com/users/10186720" target="_blank" title="StackOverflow"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.icocos.cn/" title="梦工厂" target="_blank">梦工厂</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://al1020119.github.io/" title="iOS梦工厂" target="_blank">iOS梦工厂</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-1-PHP的引用传递"><span class="nav-number">1.</span> <span class="nav-text">1.1 PHP的引用传递</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-2-PHP定义字符串的几种方式"><span class="nav-number">2.</span> <span class="nav-text">1.2 PHP定义字符串的几种方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-3-PHP的数据类型"><span class="nav-number">3.</span> <span class="nav-text">1.3 PHP的数据类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-4-PHP中的超全局数组"><span class="nav-number">4.</span> <span class="nav-text">1.4 PHP中的超全局数组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-5-NULL的三种情况"><span class="nav-number">5.</span> <span class="nav-text">1.5 NULL的三种情况</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-6-比较常量-const和define-常量一经定义不能进行修改和删除"><span class="nav-number">6.</span> <span class="nav-text">1.6 比较常量 const和define (常量一经定义不能进行修改和删除)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-变量的作用域和静态变量"><span class="nav-number">7.</span> <span class="nav-text">2.1 变量的作用域和静态变量</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#静态变量的特点："><span class="nav-number">7.1.</span> <span class="nav-text">静态变量的特点：</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-函数的参数"><span class="nav-number">8.</span> <span class="nav-text">2.2 函数的参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3-函数的返回值"><span class="nav-number">9.</span> <span class="nav-text">2.3 函数的返回值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-外部引用"><span class="nav-number">10.</span> <span class="nav-text">2.4 外部引用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-常用的PHP内置函数"><span class="nav-number">11.</span> <span class="nav-text">2.5 常用的PHP内置函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-正则表达式"><span class="nav-number">12.</span> <span class="nav-text">3.1 正则表达式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-正则表达式后向引用"><span class="nav-number">13.</span> <span class="nav-text">3.2 正则表达式后向引用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-3-正则表达式的贪婪模式"><span class="nav-number">14.</span> <span class="nav-text">3.3 正则表达式的贪婪模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-4-PHP正则表达式匹配中文"><span class="nav-number">15.</span> <span class="nav-text">3.4 PHP正则表达式匹配中文</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-5-练习-写一个139开头的手机号"><span class="nav-number">16.</span> <span class="nav-text">3.5 练习 写一个139开头的手机号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-PHP常用的文件函数复习"><span class="nav-number">17.</span> <span class="nav-text">4.1 PHP常用的文件函数复习</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-对目录的操作"><span class="nav-number">18.</span> <span class="nav-text">4.2 对目录的操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-注意事项"><span class="nav-number">19.</span> <span class="nav-text">4.3 注意事项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-1-为什么要使用会话技术"><span class="nav-number">20.</span> <span class="nav-text">5.1 为什么要使用会话技术</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-cookie"><span class="nav-number">21.</span> <span class="nav-text">5.2 cookie</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-3-session"><span class="nav-number">22.</span> <span class="nav-text">5.3 session</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-4-session存储，如果有多台服务器，可以将session存储到数据库-memcache-redis中"><span class="nav-number">23.</span> <span class="nav-text">5.4 session存储，如果有多台服务器，可以将session存储到数据库 memcache redis中</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-1-PHP类的权限控制符"><span class="nav-number">24.</span> <span class="nav-text">6.1 PHP类的权限控制符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-2-继承"><span class="nav-number">25.</span> <span class="nav-text">6.2 继承</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-多态"><span class="nav-number">26.</span> <span class="nav-text">6.3 多态</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-4-常用的设计模式"><span class="nav-number">27.</span> <span class="nav-text">6.4 常用的设计模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-HTTP-协议状态码"><span class="nav-number">28.</span> <span class="nav-text">7.1 HTTP 协议状态码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-OSI-七层模型"><span class="nav-number">29.</span> <span class="nav-text">7.2 OSI 七层模型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-3-HTTP协议工作原理"><span class="nav-number">30.</span> <span class="nav-text">7.3 HTTP协议工作原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-4-HTTP的请求方法"><span class="nav-number">31.</span> <span class="nav-text">7.4 HTTP的请求方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-5-常见的网络协议和端口"><span class="nav-number">32.</span> <span class="nav-text">7.5 常见的网络协议和端口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-cgi协议-为了实现语言解析器和webserver之间的通信"><span class="nav-number">33.</span> <span class="nav-text">8.1 cgi协议  为了实现语言解析器和webserver之间的通信</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-2-fastcgi是cgi的改良"><span class="nav-number">34.</span> <span class="nav-text">8.2 fastcgi是cgi的改良</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-3-php-fpm-php：fastcgi-process-manager-fastcgi的进程管理器"><span class="nav-number">35.</span> <span class="nav-text">8.3 php-fpm php：fastcgi process manager fastcgi的进程管理器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-4-PHP常见的配置项"><span class="nav-number">36.</span> <span class="nav-text">8.4 PHP常见的配置项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-1-ajax技术运用了什么原理"><span class="nav-number">37.</span> <span class="nav-text">9.1 ajax技术运用了什么原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-1-系统安全性"><span class="nav-number">38.</span> <span class="nav-text">10.1 系统安全性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-2-进程管理"><span class="nav-number">39.</span> <span class="nav-text">10.2 进程管理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-3-用户管理"><span class="nav-number">40.</span> <span class="nav-text">10.3 用户管理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-4-文件系统"><span class="nav-number">41.</span> <span class="nav-text">10.4 文件系统</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-5-网络"><span class="nav-number">42.</span> <span class="nav-text">10.5 网络</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-6-文件查看"><span class="nav-number">43.</span> <span class="nav-text">10.6 文件查看</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-7-目录操作"><span class="nav-number">44.</span> <span class="nav-text">10.7 目录操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-1-mysql数据类型"><span class="nav-number">45.</span> <span class="nav-text">11.1 mysql数据类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-列属性"><span class="nav-number">46.</span> <span class="nav-text">11.2 列属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-3-mysql的基本操作"><span class="nav-number">47.</span> <span class="nav-text">11.3 mysql的基本操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-4-mysql数据表引擎"><span class="nav-number">48.</span> <span class="nav-text">11.4 mysql数据表引擎</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-5-mysql的锁机制"><span class="nav-number">49.</span> <span class="nav-text">11.5 mysql的锁机制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-6-mysql触发器"><span class="nav-number">50.</span> <span class="nav-text">11.6 mysql触发器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-7-mysql索引基础和类型"><span class="nav-number">51.</span> <span class="nav-text">11.7 mysql索引基础和类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-8-mysql索引创建的规则-！！！"><span class="nav-number">52.</span> <span class="nav-text">11.8 mysql索引创建的规则 ！！！</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#注意："><span class="nav-number">52.1.</span> <span class="nav-text">注意：</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-9-mysql语句的编写"><span class="nav-number">53.</span> <span class="nav-text">11.9 mysql语句的编写</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">曹理鹏@iCocos</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">1m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">15:47</span>
  
</div>











        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  




  
    <script type="text/javascript">
    (function(){
      var appid = 'cytKHBEtW';
      var conf = '43989b8e63b25c4e9f1fde821c996a39';
      var width = window.innerWidth || document.documentElement.clientWidth;
      if (width < 960) {
      window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){
        window.changyan.api.config({appid:appid,conf:conf})});
      }
    })();
    </script>
    <script type="text/javascript" src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script>
  







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Tc7k1mbaieCUSgmM8LPk1IBO-gzGzoHsz", "sAb7L2vwENJTteRrvFKQacUU");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.get('time'));
            
            counter.save(null, {
              success: function(counter) {
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


  
  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("Tc7k1mbaieCUSgmM8LPk1IBO-gzGzoHsz", "sAb7L2vwENJTteRrvFKQacUU");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>


  
</body>
</html>
